
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.4">
    
    
      
        <title>GnuPG verification - Argo CD - Declarative GitOps CD for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.77f3fd56.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Work Sans";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/versions.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-105170809-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gnupg-signature-verification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-header__button md-logo" aria-label="Argo CD - Declarative GitOps CD for Kubernetes">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Argo CD - Declarative GitOps CD for Kubernetes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GnuPG verification
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-nav__button md-logo" aria-label="Argo CD - Declarative GitOps CD for Kubernetes">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Argo CD - Declarative GitOps CD for Kubernetes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../understand_the_basics/" class="md-nav__link">
        Understand The Basics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../core_concepts/" class="md-nav__link">
        Core Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Operator Manual
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Operator Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Operator Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/architecture/" class="md-nav__link">
        Architectural Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/declarative-setup/" class="md-nav__link">
        Declarative Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/ingress/" class="md-nav__link">
        Ingress Configuration
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      <label class="md-nav__link" for="__nav_5_5">
        User Management
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          User Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/auth0/" class="md-nav__link">
        Auth0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/microsoft/" class="md-nav__link">
        Microsoft
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/okta/" class="md-nav__link">
        Okta
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/onelogin/" class="md-nav__link">
        OneLogin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/keycloak/" class="md-nav__link">
        Keycloak
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/openunison/" class="md-nav__link">
        OpenUnison
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/user-management/google/" class="md-nav__link">
        Google
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/rbac/" class="md-nav__link">
        RBAC Configuration
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/security/" class="md-nav__link">
        Security
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/cluster-bootstrapping/" class="md-nav__link">
        Cluster Bootstrapping
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/secret-management/" class="md-nav__link">
        Secret Management
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/high_availability/" class="md-nav__link">
        High Availability
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/disaster_recovery/" class="md-nav__link">
        Disaster Recovery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/webhook/" class="md-nav__link">
        Git Webhook Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/health/" class="md-nav__link">
        Resource Health
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/custom_tools/" class="md-nav__link">
        Custom Tooling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/custom-styles/" class="md-nav__link">
        Custom Styles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/notifications/" class="md-nav__link">
        Notifications
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/troubleshooting/" class="md-nav__link">
        Troubleshooting Tools
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_18" type="checkbox" id="__nav_5_18" >
      
      <label class="md-nav__link" for="__nav_5_18">
        Server Configuration Parameters
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Server Configuration Parameters" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_18">
          <span class="md-nav__icon md-icon"></span>
          Server Configuration Parameters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/server-commands/argocd-server/" class="md-nav__link">
        Argocd server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/server-commands/argocd-application-controller/" class="md-nav__link">
        Argocd application controller
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/server-commands/argocd-repo-server/" class="md-nav__link">
        Argocd repo server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/server-commands/argocd-dex/" class="md-nav__link">
        Argocd dex
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/server-commands/argocd-util/" class="md-nav__link">
        argocd-util Tools
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_20" type="checkbox" id="__nav_5_20" >
      
      <label class="md-nav__link" for="__nav_5_20">
        Upgrading
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Upgrading" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_20">
          <span class="md-nav__icon md-icon"></span>
          Upgrading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.8-2.0/" class="md-nav__link">
        v1.8 to v2.0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.7-1.8/" class="md-nav__link">
        v1.7 to 1.8
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.6-1.7/" class="md-nav__link">
        v1.6 to 1.7
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.5-1.6/" class="md-nav__link">
        v1.5 to 1.6
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.4-1.5/" class="md-nav__link">
        v1.4 to 1.5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.3-1.4/" class="md-nav__link">
        v1.3 to 1.4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.2-1.3/" class="md-nav__link">
        v1.2 to 1.3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.1-1.2/" class="md-nav__link">
        v1.1 to 1.2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-manual/upgrading/1.0-1.1/" class="md-nav__link">
        v1.0 to 1.1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        User Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../application_sources/" class="md-nav__link">
        Tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../kustomize/" class="md-nav__link">
        Kustomize
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        Helm
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ksonnet/" class="md-nav__link">
        Ksonnet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../jsonnet/" class="md-nav__link">
        Jsonnet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../config-management-plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tool_detection/" class="md-nav__link">
        Tool Detection
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../projects/" class="md-nav__link">
        Projects
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../private-repositories/" class="md-nav__link">
        Private Repositories
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          GnuPG verification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        GnuPG verification
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signature-verification-targets" class="md-nav__link">
    Signature verification targets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-signature-verification" class="md-nav__link">
    Enforcing signature verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rbac-rules-for-managing-gnupg-keys" class="md-nav__link">
    RBAC rules for managing GnuPG keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-gnupg-public-keys" class="md-nav__link">
    Importing GnuPG public keys
  </a>
  
    <nav class="md-nav" aria-label="Importing GnuPG public keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-cli" class="md-nav__link">
    Manage public keys using the CLI
  </a>
  
    <nav class="md-nav" aria-label="Manage public keys using the CLI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-all-configured-keys" class="md-nav__link">
    Listing all configured keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-information-about-a-certain-key" class="md-nav__link">
    Show information about a certain key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-a-key" class="md-nav__link">
    Importing a key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-from-configuration" class="md-nav__link">
    Removing a key from configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-web-ui" class="md-nav__link">
    Manage public keys using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-in-declarative-setup" class="md-nav__link">
    Manage public keys in declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-project-to-enforce-signature-verification" class="md-nav__link">
    Configuring a project to enforce signature verification
  </a>
  
    <nav class="md-nav" aria-label="Configuring a project to enforce signature verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-using-the-cli" class="md-nav__link">
    Configuring using the CLI
  </a>
  
    <nav class="md-nav" aria-label="Configuring using the CLI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-key-id-to-list-of-allowed-keys" class="md-nav__link">
    Adding a key ID to list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-id-from-the-list-of-allowed-keys" class="md-nav__link">
    Removing a key ID from the list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#showing-allowed-key-ids-for-a-project" class="md-nav__link">
    Showing allowed key IDs for a project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-list-of-key-ids" class="md-nav__link">
    Override list of key IDs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-the-web-ui" class="md-nav__link">
    Configure using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-declarative-setup" class="md-nav__link">
    Configure using declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-the-feature" class="md-nav__link">
    Disabling the feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupg-key-ring" class="md-nav__link">
    GnuPG key ring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../auto_sync/" class="md-nav__link">
        Automated Sync Policy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../diffing/" class="md-nav__link">
        Diffing Customization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../orphaned-resources/" class="md-nav__link">
        Orphaned Resources Monitoring
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../compare-options/" class="md-nav__link">
        Compare Options
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sync-options/" class="md-nav__link">
        Sync Options
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">
        Parameter Overrides
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../build-environment/" class="md-nav__link">
        Build Environment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tracking_strategies/" class="md-nav__link">
        Tracking and Deployment Strategies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../resource_hooks/" class="md-nav__link">
        Resource Hooks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../selective_sync/" class="md-nav__link">
        Selective Sync
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sync-waves/" class="md-nav__link">
        Sync Phases and Waves
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sync_windows/" class="md-nav__link">
        Sync Windows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ci_automation/" class="md-nav__link">
        Automation from CI Pipelines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../app_deletion/" class="md-nav__link">
        App Deletion
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../best_practices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../status-badge/" class="md-nav__link">
        Status Badge
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../external-url/" class="md-nav__link">
        Add external URL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../commands/argocd/" class="md-nav__link">
        Command Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Developer Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/contributing/" class="md-nav__link">
        Contribution guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/running-locally/" class="md-nav__link">
        Running ArgoCD locally
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging-remote-environment/" class="md-nav__link">
        Debugging a Remote ArgoCD Environment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/api-docs/" class="md-nav__link">
        API Docs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/test-e2e/" class="md-nav__link">
        E2E Tests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/dependencies/" class="md-nav__link">
        Managing Dependencies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/ci/" class="md-nav__link">
        Continuous Integration (CI)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/releasing/" class="md-nav__link">
        Releasing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/site/" class="md-nav__link">
        Site
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/static-code-analysis/" class="md-nav__link">
        Static Code Analysis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/faq/" class="md-nav__link">
        Contribution FAQ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../security_considerations/" class="md-nav__link">
        Security Considerations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../SUPPORT/" class="md-nav__link">
        Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-cd/releases" class="md-nav__link">
        Releases ⧉
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://blog.argoproj.io/" class="md-nav__link">
        Blog ⧉
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signature-verification-targets" class="md-nav__link">
    Signature verification targets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-signature-verification" class="md-nav__link">
    Enforcing signature verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rbac-rules-for-managing-gnupg-keys" class="md-nav__link">
    RBAC rules for managing GnuPG keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-gnupg-public-keys" class="md-nav__link">
    Importing GnuPG public keys
  </a>
  
    <nav class="md-nav" aria-label="Importing GnuPG public keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-cli" class="md-nav__link">
    Manage public keys using the CLI
  </a>
  
    <nav class="md-nav" aria-label="Manage public keys using the CLI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-all-configured-keys" class="md-nav__link">
    Listing all configured keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-information-about-a-certain-key" class="md-nav__link">
    Show information about a certain key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-a-key" class="md-nav__link">
    Importing a key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-from-configuration" class="md-nav__link">
    Removing a key from configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-web-ui" class="md-nav__link">
    Manage public keys using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-in-declarative-setup" class="md-nav__link">
    Manage public keys in declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-project-to-enforce-signature-verification" class="md-nav__link">
    Configuring a project to enforce signature verification
  </a>
  
    <nav class="md-nav" aria-label="Configuring a project to enforce signature verification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-using-the-cli" class="md-nav__link">
    Configuring using the CLI
  </a>
  
    <nav class="md-nav" aria-label="Configuring using the CLI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-key-id-to-list-of-allowed-keys" class="md-nav__link">
    Adding a key ID to list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-id-from-the-list-of-allowed-keys" class="md-nav__link">
    Removing a key ID from the list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#showing-allowed-key-ids-for-a-project" class="md-nav__link">
    Showing allowed key IDs for a project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-list-of-key-ids" class="md-nav__link">
    Override list of key IDs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-the-web-ui" class="md-nav__link">
    Configure using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-declarative-setup" class="md-nav__link">
    Configure using declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-the-feature" class="md-nav__link">
    Disabling the feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupg-key-ring" class="md-nav__link">
    GnuPG key ring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo-cd/edit/master/docs/user-guide/gpg-verification.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="gnupg-signature-verification">GnuPG signature verification<a class="headerlink" href="#gnupg-signature-verification" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>As of v1.7 it is possible to configure ArgoCD to only sync against commits
that are signed in Git using GnuPG. Signature verification is configured on
project level.</p>
<p>If a project is configured to enforce signature verification, all applications
associated with this project must have the commits in the source repositories
signed with a GnuPG public key known to ArgoCD. ArgoCD will refuse to sync to
any revision that does not have a valid signature made by one of the configured
keys. The controller will emit a <code>ResourceComparison</code> error if it tries to sync
to a revision that is either not signed, or is signed by an unknown or not
allowed public key.</p>
<p>By default, signature verification is enabled but not enforced. If you wish to
completely disable the GnuPG functionality in ArgoCD, you have to set the
environment variable <code>ARGOCD_GPG_ENABLED</code> to <code>"false"</code> in the pod templates of
the <code>argocd-server</code>, <code>argocd-repo-server</code> and <code>argocd-application-controller</code>
deployment manifests.</p>
<p>Verification of GnuPG signatures is only supported with Git repositories. It is
not possible using Helm repositories.</p>
<div class="admonition note">
<p class="admonition-title">A few words about trust</p>
<p>ArgoCD uses a very simple trust model for the keys you import: Once the key
is imported, ArgoCD will trust it. ArgoCD does not support more complex
trust models, and it is not necessary (nor possible) to sign the public keys
you are going to import into ArgoCD.</p>
</div>
<h2 id="signature-verification-targets">Signature verification targets<a class="headerlink" href="#signature-verification-targets" title="Permanent link">&para;</a></h2>
<p>If signature verification is enforced, ArgoCD will verify the signature using
following strategy:</p>
<ul>
<li>
<p>If <code>target revision</code> is a pointer to a commit object (i.e. a branch name, the
  name of a reference such as <code>HEAD</code> or a commit SHA), ArgoCD will perform the
  signature verification on the commit object the name points to, i.e. a commit.</p>
</li>
<li>
<p>If <code>target revision</code> resolves to a tag and the tag is a lightweight tag, the
  behaviour is same as if <code>target revision</code> would be a pointer to a commit
  object. However, if the tag is annotated, the target revision will point to
  a <em>tag</em> object and thus, the signature verification is performed on the tag
  object, i.e. the tag itself must be signed (using <code>git tag -s</code>).</p>
</li>
</ul>
<h2 id="enforcing-signature-verification">Enforcing signature verification<a class="headerlink" href="#enforcing-signature-verification" title="Permanent link">&para;</a></h2>
<p>To configure enforcing of signature verification, the following steps must be
performed:</p>
<ul>
<li>Import the GnuPG public key(s) used for signing commits in ArgoCD</li>
<li>Configure a project to enforce signature verification for given keys</li>
</ul>
<p>Once you have configured one or more keys to be required for verification for
a given project, enforcement is active for all applications associated with
this project.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If signature verification is enforced, you will not be able to sync from
local sources (i.e. <code>argocd app sync --local</code>) anymore.</p>
</div>
<h2 id="rbac-rules-for-managing-gnupg-keys">RBAC rules for managing GnuPG keys<a class="headerlink" href="#rbac-rules-for-managing-gnupg-keys" title="Permanent link">&para;</a></h2>
<p>The appropriate resource notation for Argo CD's RBAC implementation to allow
the managing of GnuPG keys is <code>gpgkeys</code>.</p>
<p>To allow listing of keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span><span class="p">,</span> <span class="k">role</span><span class="p">:</span><span class="n">myrole</span><span class="p">,</span> <span class="n">gpgkeys</span><span class="p">,</span> <span class="k">get</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow</span>
</code></pre></div>

<p>To allow adding keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span><span class="p">,</span> <span class="k">role</span><span class="p">:</span><span class="n">myrole</span><span class="p">,</span> <span class="n">gpgkeys</span><span class="p">,</span> <span class="k">create</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow</span>
</code></pre></div>

<p>And finally, to allow deletion of keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span><code><span class="n">p</span><span class="p">,</span> <span class="k">role</span><span class="p">:</span><span class="n">myrole</span><span class="p">,</span> <span class="n">gpgkeys</span><span class="p">,</span> <span class="k">delete</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">allow</span>
</code></pre></div>

<h2 id="importing-gnupg-public-keys">Importing GnuPG public keys<a class="headerlink" href="#importing-gnupg-public-keys" title="Permanent link">&para;</a></h2>
<p>You can configure the GnuPG public keys that ArgoCD will use for verification
of commit signatures using either the CLI, the web UI or configuring it using
declarative setup.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After you have imported a GnuPG key, it may take a while until the key is
propagated within the cluster, even if listed as configured. If you still
cannot sync to commits signed by the already imported key, please see the
troubleshooting section below.</p>
</div>
<p>Users wanting to manage the GnuPG public key configuration require the RBAC
permissions for <code>gpgkeys</code> resources.</p>
<h3 id="manage-public-keys-using-the-cli">Manage public keys using the CLI<a class="headerlink" href="#manage-public-keys-using-the-cli" title="Permanent link">&para;</a></h3>
<p>To configure GnuPG public keys using the CLI, use the <code>argocd gpg</code> command.</p>
<h4 id="listing-all-configured-keys">Listing all configured keys<a class="headerlink" href="#listing-all-configured-keys" title="Permanent link">&para;</a></h4>
<p>To list all configured keys known to ArgoCD, use the <code>argocd gpg list</code>
sub-command:</p>
<div class="codehilite"><pre><span></span><code>argocd gpg list
</code></pre></div>

<h4 id="show-information-about-a-certain-key">Show information about a certain key<a class="headerlink" href="#show-information-about-a-certain-key" title="Permanent link">&para;</a></h4>
<p>To get information about a specific key, use the <code>argocd gpg get</code> sub-command:</p>
<div class="codehilite"><pre><span></span><code>argocd gpg get &lt;key-id&gt;
</code></pre></div>

<h4 id="importing-a-key">Importing a key<a class="headerlink" href="#importing-a-key" title="Permanent link">&para;</a></h4>
<p>To import a new key to ArgoCD, use the <code>argocd gpg add</code> sub-command:</p>
<div class="codehilite"><pre><span></span><code>argocd gpg add --from &lt;path-to-key&gt;
</code></pre></div>

<p>The key to be imported can be either in binary or ASCII-armored format.</p>
<h4 id="removing-a-key-from-configuration">Removing a key from configuration<a class="headerlink" href="#removing-a-key-from-configuration" title="Permanent link">&para;</a></h4>
<p>To remove a previously configured key from the configuration, use the
<code>argocd gpg rm</code> sub-command:</p>
<div class="codehilite"><pre><span></span><code>argocd gpg rm &lt;key-id&gt;
</code></pre></div>

<h3 id="manage-public-keys-using-the-web-ui">Manage public keys using the Web UI<a class="headerlink" href="#manage-public-keys-using-the-web-ui" title="Permanent link">&para;</a></h3>
<p>Basic key management functionality for listing, importing and removing GnuPG
public keys is implemented in the Web UI. You can find the configuration
module from the <strong>Settings</strong> page in the <strong>GnuPG keys</strong> module.</p>
<p>Please note that when you configure keys using the Web UI, the key must be
imported in ASCII armored format for now.</p>
<h3 id="manage-public-keys-in-declarative-setup">Manage public keys in declarative setup<a class="headerlink" href="#manage-public-keys-in-declarative-setup" title="Permanent link">&para;</a></h3>
<p>ArgoCD stores public keys internally in the <code>argocd-gpg-keys-cm</code> ConfigMap
resource, with the public GnuPG key's ID as its name and the ASCII armored
key data as string value, i.e. the entry for the GitHub's web-flow signing
key would look like follows:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">4AEE18F83AFDEB23</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">-----BEGIN PGP PUBLIC KEY BLOCK-----</span>

    <span class="no">mQENBFmUaEEBCACzXTDt6ZnyaVtueZASBzgnAmK13q9Urgch+sKYeIhdymjuMQta</span>
    <span class="no">x15OklctmrZtqre5kwPUosG3/B2/ikuPYElcHgGPL4uL5Em6S5C/oozfkYzhwRrT</span>
    <span class="no">SQzvYjsE4I34To4UdE9KA97wrQjGoz2Bx72WDLyWwctD3DKQtYeHXswXXtXwKfjQ</span>
    <span class="no">7Fy4+Bf5IPh76dA8NJ6UtjjLIDlKqdxLW4atHe6xWFaJ+XdLUtsAroZcXBeWDCPa</span>
    <span class="no">buXCDscJcLJRKZVc62gOZXXtPfoHqvUPp3nuLA4YjH9bphbrMWMf810Wxz9JTd3v</span>
    <span class="no">yWgGqNY0zbBqeZoGv+TuExlRHT8ASGFS9SVDABEBAAG0NUdpdEh1YiAod2ViLWZs</span>
    <span class="no">b3cgY29tbWl0IHNpZ25pbmcpIDxub3JlcGx5QGdpdGh1Yi5jb20+iQEiBBMBCAAW</span>
    <span class="no">BQJZlGhBCRBK7hj4Ov3rIwIbAwIZAQAAmQEH/iATWFmi2oxlBh3wAsySNCNV4IPf</span>
    <span class="no">DDMeh6j80WT7cgoX7V7xqJOxrfrqPEthQ3hgHIm7b5MPQlUr2q+UPL22t/I+ESF6</span>
    <span class="no">9b0QWLFSMJbMSk+BXkvSjH9q8jAO0986/pShPV5DU2sMxnx4LfLfHNhTzjXKokws</span>
    <span class="no">+8ptJ8uhMNIDXfXuzkZHIxoXk3rNcjDN5c5X+sK8UBRH092BIJWCOfaQt7v7wig5</span>
    <span class="no">4Ra28pM9GbHKXVNxmdLpCFyzvyMuCmINYYADsC848QQFFwnd4EQnupo6QvhEVx1O</span>
    <span class="no">j7wDwvuH5dCrLuLwtwXaQh0onG4583p0LGms2Mf5F+Ick6o/4peOlBoZz48=</span>
    <span class="no">=Bvzs</span>
    <span class="no">-----END PGP PUBLIC KEY BLOCK-----</span>
</code></pre></div>

<h2 id="configuring-a-project-to-enforce-signature-verification">Configuring a project to enforce signature verification<a class="headerlink" href="#configuring-a-project-to-enforce-signature-verification" title="Permanent link">&para;</a></h2>
<p>Once you have imported the GnuPG keys to ArgoCD, you must now configure the
project to enforce the verification of commit signatures with the imported
keys.</p>
<h3 id="configuring-using-the-cli">Configuring using the CLI<a class="headerlink" href="#configuring-using-the-cli" title="Permanent link">&para;</a></h3>
<h4 id="adding-a-key-id-to-list-of-allowed-keys">Adding a key ID to list of allowed keys<a class="headerlink" href="#adding-a-key-id-to-list-of-allowed-keys" title="Permanent link">&para;</a></h4>
<p>To add a key ID to the list of allowed GnuPG keys for a project, you can use
the <code>argocd proj add-signature-key</code> command, i.e. the following command would
add the key ID <code>4AEE18F83AFDEB23</code> to the project named <code>myproj</code>:</p>
<div class="codehilite"><pre><span></span><code>argocd proj add-signature-key myproj 4AEE18F83AFDEB23
</code></pre></div>

<h4 id="removing-a-key-id-from-the-list-of-allowed-keys">Removing a key ID from the list of allowed keys<a class="headerlink" href="#removing-a-key-id-from-the-list-of-allowed-keys" title="Permanent link">&para;</a></h4>
<p>Similarily, you can remove a key ID from the list of allowed GnuPG keys for a
project using the <code>argocd proj remove-signature-key</code> command, i.e. to remove
the key added above from project <code>myproj</code>, use the command:</p>
<div class="codehilite"><pre><span></span><code>argocd proj remove-signature-key myproj 4AEE18F83AFDEB23
</code></pre></div>

<h4 id="showing-allowed-key-ids-for-a-project">Showing allowed key IDs for a project<a class="headerlink" href="#showing-allowed-key-ids-for-a-project" title="Permanent link">&para;</a></h4>
<p>To see which key IDs are allowed for a given project, you can inspect the
output of the <code>argocd proj get</code> command, i.e for a project named <code>gpg</code>:</p>
<div class="codehilite"><pre><span></span><code>$ argocd proj get gpg
Name:                        gpg
Description:                 GnuPG verification
Destinations:                *,*
Repositories:                *
Allowed Cluster Resources:   */*
Denied Namespaced Resources: &lt;none&gt;
Signature keys:              4AEE18F83AFDEB23, 07E34825A909B250
Orphaned Resources:          disabled
</code></pre></div>

<h4 id="override-list-of-key-ids">Override list of key IDs<a class="headerlink" href="#override-list-of-key-ids" title="Permanent link">&para;</a></h4>
<p>You can also explicitly set the currently allowed keys with one or more new keys
using the <code>argocd proj set</code> command in combination with the <code>--signature-keys</code>
flag, which you can use to specify a comma separated list of allowed key IDs:</p>
<div class="codehilite"><pre><span></span><code>argocd proj <span class="nb">set</span> myproj --signature-keys 4AEE18F83AFDEB23,07E34825A909B250
</code></pre></div>

<p>The <code>--signature-keys</code> flag can also be used on project creation, i.e. the
<code>argocd proj create</code> command.</p>
<h3 id="configure-using-the-web-ui">Configure using the Web UI<a class="headerlink" href="#configure-using-the-web-ui" title="Permanent link">&para;</a></h3>
<p>You can configure the GnuPG key IDs required for signature verification using
the web UI, in the Project configuration. Navigate to the <strong>Settings</strong> page
and select the <strong>Projects</strong> module, then click on the project you want to
configure.</p>
<p>From the project's details page, click <strong>Edit</strong> and find the
<strong>Required signature keys</strong> section, where you can add or remove the key IDs
for signature verification. After you have modified your project, click
<strong>Update</strong> to save the changes.</p>
<h3 id="configure-using-declarative-setup">Configure using declarative setup<a class="headerlink" href="#configure-using-declarative-setup" title="Permanent link">&para;</a></h3>
<p>You can specify the key IDs required for signature verification in the project
manifest within the <code>signatureKeys</code> section, i.e:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gpg</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">clusterResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GnuPG verification</span>
  <span class="nt">destinations</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">namespace</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">server</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">namespaceResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">signatureKeys</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">keyID</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4AEE18F83AFDEB23</span>
  <span class="nt">sourceRepos</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;*&#39;</span>
</code></pre></div>

<p><code>signatureKeys</code> is an array of <code>SignatureKey</code> objects, whose only property is
<code>keyID</code> at the moment.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="disabling-the-feature">Disabling the feature<a class="headerlink" href="#disabling-the-feature" title="Permanent link">&para;</a></h3>
<p>The GnuPG feature can be completely disabled if desired. In order to disable it,
set the environment variable <code>ARGOCD_GPG_ENABLED</code> to <code>false</code> for the pod
templates of the <code>argocd-server</code>, <code>argocd-repo-server</code> and
 <code>argocd-application-controller</code> deployments.</p>
<p>After the pods have been restarted, the GnuPG feature is disabled.</p>
<h3 id="gnupg-key-ring">GnuPG key ring<a class="headerlink" href="#gnupg-key-ring" title="Permanent link">&para;</a></h3>
<p>The GnuPG key ring used for signature verification is maintained within the
pods of <code>argocd-repo-server</code>. The keys in the keyring are synchronized to the
configuration stored in the <code>argocd-gpg-keys-cm</code> ConfigMap resource, which is
volume-mounted to the <code>argocd-repo-server</code> pods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The GnuPG key ring in the pods is transient and gets recreated from the
configuration on each restart of the pods. You should never add or remove
keys manually to the key ring, because your changes will be lost. Also,
any of the private keys found in the key ring are transient and will be
regenerated upon each restart. The private key is only used to build the
trust DB for the running pod.</p>
</div>
<p>To check whether the keys are actually in sync, you can <code>kubectl exec</code> into the
repository server's pods and inspect the key ring, which is located at path
<code>/app/config/gpg/keys</code></p>
<div class="codehilite"><pre><span></span><code>$ kubectl <span class="nb">exec</span> -it argocd-repo-server-7d6bdfdf6d-hzqkg bash
argocd@argocd-repo-server-7d6bdfdf6d-hzqkg:~$ <span class="nv">GNUPGHOME</span><span class="o">=</span>/app/config/gpg/keys gpg --list-keys
/app/config/gpg/keys/pubring.kbx
--------------------------------
pub   rsa2048 <span class="m">2020</span>-06-15 <span class="o">[</span>SC<span class="o">]</span> <span class="o">[</span>expires: <span class="m">2020</span>-12-12<span class="o">]</span>
      D48F075D818A813C436914BC9324F0D2144753B1
uid           <span class="o">[</span>ultimate<span class="o">]</span> Anon Ymous <span class="o">(</span>ArgoCD key signing key<span class="o">)</span> &lt;noreply@argoproj.io&gt;

pub   rsa2048 <span class="m">2017</span>-08-16 <span class="o">[</span>SC<span class="o">]</span>
      5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23
uid           <span class="o">[</span>ultimate<span class="o">]</span> GitHub <span class="o">(</span>web-flow commit signing<span class="o">)</span> &lt;noreply@github.com&gt;

argocd@argocd-repo-server-7d6bdfdf6d-hzqkg:~$
</code></pre></div>

<p>If the key ring stays out of sync with your configuration after you have added
or removed keys for a longer period of time, you might want to restart your
<code>argocd-repo-server</code> pods. If such a problem persists, please consider raising
a bug report.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../private-repositories/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Private Repositories
            </div>
          </div>
        </a>
      
      
        <a href="../auto_sync/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Automated Sync Policy
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.9b151c6a.min.js"></script>
      
        <script src="../../assets/versions.js"></script>
      
    
  </body>
</html>