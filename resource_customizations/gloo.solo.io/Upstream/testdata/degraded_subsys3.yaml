apiVersion: gloo.solo.io/v1
kind: Upstream
metadata:
  name: petstore
  namespace: default
spec:
  circuitBreakers:
    maxConnections: 20480
    maxPendingRequests: 20490
    maxRequests: 20480
    maxRetries: 3
  healthChecks:
  - alwaysLogHealthCheckFailures: true
    eventLogPath: /dev/stdout
    healthyThreshold: 3
    httpHealthCheck:
      path: /health
    interval: 5s
    timeout: 2s
    unhealthyThreshold: 3
  kube:
    selector:
      app: petstore
    serviceName: petstore
    serviceNamespace: default
    servicePort: 8080
status:
  statuses:
    gloo-system:
      reportedBy: gateway
      state: 3
      subresourceStatuses:
        '*v1.Proxy.gloo-system.gateway-proxy':
          reportedBy: gloo
          state: 3
    other-system:
      reportedBy: gateway
      state: 1
      subresourceStatuses:
        '*v1.Proxy.gloo-system.gateway-proxy':
          reportedBy: gloo
          state: 1
