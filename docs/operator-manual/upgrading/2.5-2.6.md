# v2.5 to 2.6

## Known Issues

### Broken `project` filter before 2.6.3

Argo CD 2.4.0 introduced a breaking API change, renaming the `project` filter to `projects`.

#### Impact to CLI clients

If your CLI version is older than 2.4.0, and if your CLI is using the GRPC-web protocol (more on that below), then the
`--project` filter will not work. **The failing project filter could have detrimental consequences if, for example, it
is used with an `argocd app delete` command.**

By default, the CLI uses GRPC over HTTP2. This bug does not apply to that case. However, if you are using the CLI with
a proxy which does not support HTTP2, then the CLI will use GRPC-web instead. In that case, the `--project` filter will
not work. Similarly, if you manually set `--grpc-web` or `--grpc-web-root-path` on the CLI, then the `--project` filter
will not work.

#### Impact to API clients

A similar issue applies to other API clients which communicate with the Argo CD API server via its REST API. If the
client uses the `project` field to filter projects, the filter will not be applied.

#### How to fix the problem

Upgrade to Argo CD >=2.4.24, >=2.5.12, or >=2.6.3. This version of Argo CD will accept both `project` and `projects` as
valid filters.

Alternatively, upgrade your CLI or other API client to a version which supports the `projects` filter (>= 2.4.0).

## ApplicationSets: `^` behavior change in Sprig's semver functions
Argo CD 2.5 introduced [Go templating in ApplicationSets](https://argo-cd.readthedocs.io/en/stable/operator-manual/applicationset/GoTemplate/). Go templates have access to the Sprig function library.

Argo CD 2.6 upgrades Sprig to v3. That upgrade includes an upgrade of [Masterminds/semver](https://github.com/Masterminds/semver/releases) to v3.

Masterminds/semver v3 changed the behavior of the `^` prefix in semantic version constraints. If you are using Go-templated ApplicationSets which include references to [Sprig's semver functions](https://masterminds.github.io/sprig/semver.html) and use the `^` prefix, read the [Masterminds/semver changelog](https://github.com/Masterminds/semver/releases/tag/v3.0.0) to understand how your ApplicationSets' behavior may change.

## Applications with suspended jobs now marked "Suspended" instead of "Progressing"
Prior to Argo CD v2.6, an Application managing a suspended Job would be marked as "Progressing". This was confusing/unexpected behavior for many. Starting with v2.6, Argo CD will mark such Applications as "Suspended".

If you have processes which rely on the previous behavior (for example, a CI job with an argocd app wait call), update those before upgrading to v2.6.

## The API Server now requires tokens to include the `aud` claim by default

Argo CD v2.6 now requires that the `aud` claim be present in the token used to authenticate to the API Server. This is a 
security improvement, as it prevents tokens from being used against the API Server which were not intended for it.

If you rely on an OIDC provider which does not provide a `aud` claim, you can disable this requirement by setting the 
`skipAudienceCheckWhenTokenHasNoAudience` flag to `true` in your Argo CD OIDC configuration. (See the 
[OIDC configuration documentation](https://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/#existing-oidc-provider)
for an example.)

## Removal of argocd-cm plugin support delayed until 2.7

Support for argocd-cm plugins was previously scheduled for 2.6. At the time, sidecar plugins could not be specified by
name. Argo CD v2.6 introduces support for specifying sidecar plugins by name. 

Removal of argocd-cm plugin support has been delayed until 2.7 to provide a transition time for users who need to 
specify plugins by name. 
